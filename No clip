local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local noclip = false
local noclipConnection

function onNoclipToggle()
    noclip = not noclip
    if noclip then
        print("NoClip Enabled")
        noclipConnection = game:GetService("RunService").Stepped:Connect(function()
            player.Character.Humanoid:ChangeState(11)
        end)
    else
        print("NoClip Disabled")
        if noclipConnection then
            noclipConnection:Disconnect()
        end
    end
end

mouse.KeyDown:Connect(function(key)
    if key:lower() == "l" then
        onNoclipToggle()
    end
end)

game:GetService("Players").PlayerAdded:Connect(function(newPlayer)
    newPlayer.CharacterAdded:Connect(function(character)
        character:WaitForChild("HumanoidRootPart")
        onNoclipToggle()
    end)
end)
